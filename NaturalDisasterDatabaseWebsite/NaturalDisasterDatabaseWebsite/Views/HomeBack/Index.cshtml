@using System.Security.Claims
@{
    Layout = "_BackLayout";
    ViewData["Title"] = "首页";
}
<style>
    h4 {
        font-weight: 500;
        color: #333;
        font-size: 18px;
        margin-top: 20px;
    }

        h4 span {
            color: #f80606;
        }

    .pNav {
        text-align: center;
        font-size: 30px;
        color: #CF0066;
        font-weight: 500;
    }

    .pTitle {
        font-size: 20px;
        color: #060;
        padding-left: 15px;
    }

    div.pSize ul.menu li.level1 ul.level2 {
        display: none;
    }

    .menu, .level2 {
        list-style: none;
        font-size: 16px;
    }

    .menu {
        padding-left: 15px;
    }

        .menu a {
            color: #333;
            text-decoration: none;
            display: inline-block;
            text-indent: 2em;
        }

            .menu a:hover {
                color: #337ab7;
            }

    .level2 p {
        text-indent: 2em;
        margin: 8px 0;
    }
</style>
<input value="@User.FindFirstValue("ID")" id="userid" type="hidden" />
@*<input id="imgsrc" />*@
<div id="content">
    <marquee><h4>欢迎&nbsp;<span>━(*｀∀´*)ノ亻!</span>&nbsp;来到八桂自然灾害管理信息系统后台哟……</h4></marquee>

    <table style="width:100%;">
        <tr>
            <td>
                <p class="pNav">快捷导航</p>
                <div>
                    <p class="pTitle">主要功能：</p>
                    <div class="pSize">
                        <ul class="menu">
                            <li class="level1">
                                <a href="#none">1.灾害数据管理.</a>
                                <ul class="level2" style="display:block;">
                                    <li style="color:#808080;">
                                        <p>时刻数据管理模块拥有八桂灾害的 年月日-时分秒 的数据</p>
                                        <p>年度数据管理模块拥有八桂灾害的 年 的数据</p>
                                        <p>在这里可以对时刻和年度数据进行添加、删除、修改操作</p>
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">2.用户管理.</a>
                                <ul class="level2">
                                    <li style="color:#808080;">
                                        <p>在这里可以对用户进行添加、编辑、查看、删除、搜索、排序等操作</p>
                                        <p>这里有分页功能、跳转功能、以及可以查看用户发表的文章和留言</p>
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">3.文章管理.</a>
                                <ul class="level2">
                                    <li style="color:#808080;">
                                        <p>在这里可以对文章进行添加、编辑、查看、删除、搜索等操作</p>
                                        <p>发表文章时可以包含图片、超链接、视频、不同格式的文件（如word文档、excel表格、txt等）以及音乐，当然若还想包含其他相关的知识等你自行探索哟</p>
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">4.论坛管理.</a>
                                <ul class="level2">
                                    <li style="color:#808080;">
                                        <p>在这里可以对留言进行删除、批量删除、搜索等操作</p>
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">5.网站设置.</a>
                                <ul class="level2">
                                    <li style="color:#808080;">
                                        <p>网站对用户进行了三种分类：游客、普通用户、管理员</p>
                                        <p>游客仅能浏览一下网站，不能对网站进行任何操作</p>
                                        <p>普通用户除了能浏览网站，还可下载灾害数据和发表灾害知识，及删除自身发表的文章和留言等操作</p>
                                        <p>管理员可以对网站现有的所有功能进行操作</p>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <hr />
                <div class="dCent">
                    <p class="pTitle">使用帮助：</p>
                    <div class="pSize">
                        <ul class="menu">
                            <li class="level1">
                                <a href="#none">※ 如何添加用户？</a>
                                <ul class="level2" style="display:block;">
                                    <li style="color:#808080;">
                                        <p>点击导航栏的用户管理，来到用户管理界面：再点击新增用户，进入新增用户界面，就可以新增用户啦<a asp-controller="Users" asp-action="Create"><img src="~/images/top01.png" style="width:30px; height:30px; transform:rotate(90deg)" />快捷添加</a></p> &emsp;&emsp;
                                        <img src="~/images/newuser.png" />
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">※ 如何发布文章？</a>
                                <ul class="level2">
                                    <li style="color:#808080;">
                                        <p>方式一：此方式可以用网站现有的任一账号进行新添文章<br />点击导航栏的文章管理，来到文章管理界面：再点击新添文章，进入新添文章界面，就可以提交文章啦。如果要发布文章，需要管理员到文章编辑功能处进行审核，审核通过才是正式发布文章，在前端灾害知识模块中才能看到哦<a asp-controller="Science_essay" asp-action="Create"><img src="~/images/top01.png" style="width:30px; height:30px; transform:rotate(90deg)" />快捷发布</a><img src="~/images/newwenzhang.png" /></p>
                                        <p>方式二：此方式仅限于当前登录账号进行新添文章<br />点击导航栏中的头像，快速来到个人中心，再点击写文章，就可以提交文章啦<a asp-controller="PersonCenter" asp-action="Create"><img src="~/images/top01.png" style="width:30px; height:30px; transform:rotate(90deg)" />快捷写文章</a></p>
                                    </li>
                                </ul>
                            </li>
                            <li class="level1">
                                <a href="#none">※ 上传文件？</a>
                                <ul class="level2">
                                    <li style="color:#808080;"><p>上传文件仅限在新添和修改文章内容时可以添加文件附件</p></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div>

<script src="~/js/jquery-3.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    //等待dom元素加载完毕.
    $(document).ready(function () {
        $(".level1 > a").click(function () {
            $(this).addClass("current");   //给当前元素添加"current"样式
            $(this).next().show();                //下一个元素显示
            //父元素的兄弟元素的子元素<a>移除"current"样式
            $(this).next().parent().siblings().children("a").removeClass("current");
            $(this).next().parent().siblings().children("a").next().hide(); //它们的下一个元素隐藏
            return false;
        });
        var oid = $("#userid").val(); //获取账号输入框的value值

        //前台个人中心修改头像：后台管理员头像也跟着变
        $.ajax({ //ajax技术传值
            type: "post",
            url: "/HomeBack/GetUserImg", //调用Account控制器中VerifyUsername方法
            data: {
                "id": oid, //传值
            },
            success: function (e) { //成功后的操作
                let oldimgsrc = $("#navimgsrc")[0].src;
                var oldsrc = oldimgsrc.split("/");
                if (oldsrc[oldsrc.length - 1] != e.imgsrc[0]) {
                    var oSrc = "/upfiles/" + e.imgsrc[0];
                    $("#navimgsrc").attr("src", oSrc);
                }
            }
        });
    });
</script>