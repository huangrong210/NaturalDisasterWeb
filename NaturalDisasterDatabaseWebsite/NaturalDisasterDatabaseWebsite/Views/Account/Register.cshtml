@*注册页面*@
@*@model IEnumerable<NaturalDisasterDatabaseWebsite.Models.UsersViewModel>*@
@*@model指令指定传递给Razor页面的模型类型*@
@model NaturalDisasterDatabaseWebsite.Models.UsersViewModel
@{
    ViewData["Title"] = "注册";
    ViewData["userstatus"] = "普通用户";
}
<style>
    .outerDiv {
        width: 100%;
        height: 492px;
        display: block;
        position: relative;
    }
    .outerDiv::after {
        content: "";
        position: absolute;
        background: url(/images/Login1.png) no-repeat center center;
        background-size: 100% 100%;
        opacity: 0.5;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        z-index: -1;
    }
    .btn-primary {
        background-color: #337ab7;
        border-color: #337ab7;
    }
    .input-group .form-control {
        float: none;
        width: 280px;
        margin-bottom: 2px;
        margin-left: 6px;
    }
    label {
        color: #333;
        letter-spacing: 1px;
        font-weight: normal;
    }
    label i {
        font-size: 30px;
        top: 10px !important;
    }
    .label {
        padding: 0px;
    }
    .label::before, .labelf::before {
        content: '*';
        margin-right: 4px;
        font-size: 24px;
    }
    .label::before {
        color: #FB0200;
    }
    .labelf::before {
        color: transparent;
    }
    .form-signin {
        width: 430px;
        padding: 8px 15px;
        position: absolute;
        margin: auto;
        top: 0;
        left: 94px;
        bottom: 0;
    }
    .form-signin::after {
        content: "";
        position: absolute;
        opacity: 0.4;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        z-index: -1;
        border-radius: 5px;
    }
    .input-group, .cent {
        margin: 0 auto;
    }
    .bcent {
        display: block;
        text-align: center;
    }
    #basicSelect {
        padding: 5px 18px 7px 12px;
        outline: none;
    }
</style>
<div class="outerDiv">
    <div class="form-signin">
        <p style="letter-spacing:3px;text-align:center; font-size:16px; margin:0px 0px;">欢迎注册</p>
        <form name="form1" asp-action="Register" method="post" enctype="multipart/form-data">
            @*asp-validation-summary 是一个 TagHelper 标签助手，用于输出所有的验证的错误信息的概要信息
        而 ModelOnly 是类 ValidationSummary 的一个成员，意思是只输出模型验证的错误信息*@
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input asp-for="status" type="hidden" value="@ViewData["userstatus"]" />
            <div class="input-group">
                @*以asp-开头的属性是TagHelper标记帮助程序，也称TagHelper 标签助手*@
                <label asp-for="username" class="label"><i class="glyphicon glyphicon-user" style="color:#FDCBA6;"></i></label>
                <input asp-for="username" type="text" id="isexist" class="form-control" placeholder="请设置账号" />
                <span asp-validation-for="username" class="text-danger bcent" id="msg1"></span>
            </div>
            <div class="input-group">
                <label asp-for="password" class="label"><i class="glyphicon glyphicon-lock" style="color:#FCB439;"></i></label>
                <input asp-for="password" type="password" id="oldpassword" class="form-control" placeholder="请设置6位数字密码" style="position:relative; z-index:0;">
                <span class="see-passwordold" style="color:#666; position:absolute; right:10px; top:15px; z-index:10;">
                    <i class="glyphicon glyphicon-eye-close no-see-password-icon oldpassword"></i>
                    <i class="glyphicon glyphicon-eye-open see-password-icon oldpassword" style="display:none;"></i>
                </span>
                <span asp-validation-for="password" class="text-danger bcent"></span>
            </div>
            <div class="input-group">
                <label asp-for="sex" class="label"><i class="glyphicon glyphicon-transfer" style="color:#eb79a3;"></i></label>
                <input asp-for="sex" type="hidden" id="sex" />
                <select id="basicSelect" class="form-control" onchange="document.getElementById('sex').value = this.value;" required>
                    <option selected disabled value="" style="display:none;">请选择性别</option>
                    <option value="男">男</option>
                    <option value="女">女</option>
                </select>
                <span asp-validation-for="sex" class="text-danger bcent"></span>
            </div>
            <div class="input-group">
                <label asp-for="email" class="label"><i class="glyphicon glyphicon-envelope" style="color:#197E46;"></i></label>
                <input asp-for="email" type="hidden" id="email" />
                <input name="email" class="form-control" id="verifyEmail" placeholder="电子邮箱,例如：xxx@xx.com" onchange="document.getElementById('email').value = this.value;" />
                <span asp-validation-for="email" class="text-danger bcent" id="msg2"></span>
            </div>
            <div class="input-group">
                <label asp-for="telephone" class="label"><i class="glyphicon glyphicon-earphone" style="color:#00ff21;"></i></label>
                <input asp-for="telephone" type="hidden" id="tel">
                <input name="telephone" class="form-control" id="verifyTel" placeholder="请填写常用手机号" onchange="document.getElementById('tel').value = this.value;">
                <span asp-validation-for="telephone" class="text-danger bcent" id="msg3"></span>
            </div>
            <div class="input-group">
                <label asp-for="img" class="labelf"><i class="glyphicon glyphicon-picture" style="color:#025a2e;"></i></label>
                <input asp-for="img" type="hidden" id="textfield" value="head-default.png" />
                @*<input type="file" class="form-control" id="files" name="files" style="display:inline-block; padding:3px 0px 1px 12px;" onchange="document.getElementById('textfield').value = this.files[0].name;" />*@
                <input type="file" class="form-control" id="files" name="files" style="display:inline-block; padding:3px 0px 1px 12px;" />
                <span asp-validation-for="img" class="text-danger bcent"></span>
            </div>
            <div class="input-group">
                <label asp-for="workplace" class="labelf"><i class="glyphicon glyphicon-map-marker" style="color:#FB0200;"></i></label>
                <input asp-for="workplace" type="hidden" id="place" value="该用户很懒，什么也没留下~" />
                <input name="workplace" class="form-control" placeholder="请填写现工作地点" onchange="document.getElementById('place').value = this.value;" />
                <span asp-validation-for="workplace" class="text-danger bcent"></span>
            </div>
            <div class="input-group">
                <label asp-for="occupation" class="labelf"><i class="glyphicon glyphicon-blackboard" style="color:#037FFF;"></i></label>
                <input asp-for="occupation" type="hidden" id="occu" value="该用户很懒，什么也没留下~">
                <input name="occupation" class="form-control" placeholder="请填写现从事职业" onchange="document.getElementById('occu').value = this.value;">
                <span asp-validation-for="occupation" class="text-danger bcent"></span>
            </div>
            <div class="input-group">
                <label asp-for="address" class="labelf"><i class="glyphicon glyphicon-equalizer" style="color:#FDE700;"></i></label>
                <input asp-for="address" type="hidden" id="address" value="该用户很懒，什么也没留下~">
                <input name="address" class="form-control" placeholder="请填写现居住地址" onchange="document.getElementById('address').value = this.value;">
                <span asp-validation-for="address" class="text-danger bcent"></span>
            </div>
            @*<div class="input-group">
            <label>
                <input type="checkbox" />
                记住密码
            </label>
        </div>*@
            <div class="input-group cent" style="margin-top:4px;">
                <button type="submit" class="btn btn-default" style="margin-right:30px;">注册</button>
                <button type="reset" class="btn btn-default">重置</button>
            </div>
        </form>
        <hr style="margin:9px;" />
        <div style="text-align:center;">
            已有账号?
            <a asp-area="" asp-controller="Account" asp-action="Login">立即登录</a>
        </div>
    </div>
</div>
<div class="input-group" style="left:-60px; top:-234px;">
    <input type="button" id="upload" class="btn btn-success" style="cursor:pointer;" value="上 传" />
</div>
@*<div class="row">
    <div class="form-group">
        <div class="col-md-10">
            <p>上传一个或多个文件:</p>
            <input type="file" id="files" name="files" multiple />
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-md-10">
            <input type="button" id="upload" class="btn btn-success" style="cursor:pointer;" value="上传" />
        </div>
    </div>
</div>*@
@* 密码眨眼闭眼 *@
<script>
    $('.see-passwordold').click(function () {
        $('.oldpassword').toggle();
        if ($('#oldpassword').attr('type') == 'password') {
            $('#oldpassword').attr('type', 'text');
            $('#oldpassword .see-password-icon').style.display = "inline-block";
        } else {
            $('#oldpassword').attr('type', 'password');
            $('#oldpassword .no-see-password-icon').style.display = "none";
        }
    });
</script>
<script src="~/js/jquery-3.4.1.min.js"></script>
<script src="~/js/picture.js"></script>
<script>
    $("#isexist").blur(function () { //账号输入框失焦时执行
        var username = $("#isexist").val(); //获取账号输入框的value值
        if (username) {
            $.ajax({ //ajax技术传值
                type: "post",
                url: "/Account/VerifyUsername", //调用Account控制器中VerifyUsername方法
                data: {
                    "username": username, //传值
                },
                success: function (e) { //成功后的操作
                    if (e.message) {
                        //把后台返回的信息显示到注册页面
                        document.getElementById('msg1').innerText = e.message;
                    }
                }
            });
        }
    });
</script>
<script>
    //用户
    $("#isexist").blur(function () { //账号输入框失焦时执行
        var username = $("#isexist").val(); //获取账号输入框的value值
        if (username) {
            $.ajax({ //ajax技术传值
                type: "post",
                url: "/Account/VerifyUsername", //调用Account控制器中VerifyUsername方法
                data: {
                    "username": username, //传值
                },
                success: function (e) { //成功后的操作
                    if (e.message) { 
                        //把后台返回的信息显示到注册页面
                        document.getElementById('msg1').innerText = e.message;
                    }
                }
            });
        }
    });
    //邮箱
    $("#verifyEmail").blur(function () {
        var email = $("#verifyEmail").val();
        if (email) {
            $.ajax({
                type: "post",
                url: "/Account/VerifyEmail",
                data: {
                    "email": email,
                },
                success: function (e) {
                    if (e.message) {
                        document.getElementById('msg2').innerText = e.message;
                    }
                }
            });
        }
    });
    //手机
    $("#verifyTel").blur(function () {
        var tel = $("#verifyTel").val();
        if (tel) {
            $.ajax({
                type: "post",
                url: "/Account/VerifyTelephone",
                data: {
                    "telephone": tel,
                },
                success: function (e) {
                    if (e.message) {
                        document.getElementById('msg3').innerText = e.message;
                    }
                }
            });
        }
    });
</script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
